language: node_js
node_js:
  - '10'
cache:
  pip: true
  npm: true
  directories:
    - "/home/travis/.rvm/"
    - node_modules
    - "$(npm config get prefix)/lib/node_modules/firebase-tools"
script:
  - echo "Deploy!!"
  - echo "Deploy!!"
  - pushd functions
  - npm i
  - popd
install:
  - npm install -g firebase-tools
after_success:
  - firebase deploy --token $FIREBASE_TOKEN
  - curl -X POST -H "Authorization: Bearer $LINE_TOKEN" -F "message=Cloud Functions DEPLOYED!" https://notify-api.line.me/api/notify

